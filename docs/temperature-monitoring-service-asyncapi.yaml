asyncapi: '2.2.0'
info:
  title: Temperature Monitoring Service
  version: '1.0.0'
  description: |
    The Temperature Monitoring Service is responsible for collecting temperature data from sensors and publishing this data to Kafka for other microservices.
  contact:
    name: Support Team
    url: 'https://warm-home.com/support'
    email: support@warm-home.com
servers:
  production:
    url: kafka.warm-home.com:9092
    protocol: kafka
    description: Production Kafka broker
  development:
    url: kafka-dev.warm-home.com:9092
    protocol: kafka
    description: Development Kafka broker
channels:
  telemetry.temperature:
    description: Channel for publishing temperature data
    publish:
      summary: Publishes temperature data
      operationId: publishTemperatureData
      message:
        $ref: '#/components/messages/TemperatureDataMessage'
components:
  messages:
    TemperatureDataMessage:
      name: TemperatureDataMessage
      title: Temperature Data Message
      summary: Contains temperature data collected from sensors
      contentType: application/json
      payload:
        $ref: '#/components/schemas/TemperatureData'
  schemas:
    TemperatureData:
      type: object
      required:
        - deviceId
        - timestamp
        - temperature
      properties:
        deviceId:
          type: string
          format: uuid
          description: Unique identifier of the device (temperature sensor)
        timestamp:
          type: string
          format: date-time
          description: Temperature measurement time in ISO 8601 format
        temperature:
          type: number
          format: float
          description: Measured temperature in degrees Celsius
        unit:
          type: string
          enum:
            - Celsius
            - Fahrenheit
          default: Celsius
          description: Temperature unit of measurement
        metadata:
          type: object
          additionalProperties:
            type: string
          description: Additional metadata
  securitySchemes:
    kafka_auth:
      type: userPassword
      description: Kafka authentication using username and password

